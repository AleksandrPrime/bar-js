"use strict";function BarChart(t,a,e,r){var i=this;i.configureChart(t,a,e,r),i.performPreOperations(),console.log(i)}function getRandomInt(t,a){return t=Math.ceil(t),a=Math.floor(a),Math.floor(Math.random()*(a-t))+t}BarChart.prototype.configureChart=function(t,a,e,r){this.setCanvasParameters(t,a,e,r),this.setChartParameters()},BarChart.prototype.setCanvasParameters=function(t,a,e,r){var i=this;i.id=t,i.width=a,i.height=e,i.data=r},BarChart.prototype.setChartParameters=function(){var t=this;t.axisRatio=10,t.verticalMargin=t.height*t.axisRatio/100,t.horizontalMargin=t.width*t.axisRatio/100,t.axisColor="#b1b1b1",t.axisWidth=.75,t.fontRatio=3,t.fontFamily="times",t.fontStyle="normal",t.fontWeight="300",t.fontColor="#666",t.verticalFontSize=t.height*t.fontRatio/100,t.horizontalFontSize=t.width*t.fontRatio/100,t.guidelineColor="#e5e5e5",t.guidelineWidth=.5},BarChart.prototype.performPreOperations=function(){var t=this;t.createCanvas(),t.handleData(),t.prepareData(),t.drawChart()},BarChart.prototype.createCanvas=function(){var t=this;let a=document.createElement("canvas");a.id=t.id+"-"+Math.random(),a.width=t.width,a.height=t.height,document.getElementById(t.id).innerHTML="",document.getElementById(t.id).appendChild(a),t.canvas=a,t.context=a.getContext("2d")},BarChart.prototype.handleData=function(){var a=this;a.labels=[],a.values=[],a.data.forEach(t=>{a.labels.push(t.label),a.values.push(t.value)})},BarChart.prototype.prepareData=function(){var t=this;t.itemsNum=t.data.length,t.maxValue=Math.max.apply(null,t.values),t.minValue=Math.min.apply(null,t.values),t.verticalAxisWidth=t.height-2*t.verticalMargin,t.horizontalAxisWidth=t.width-2*t.horizontalMargin,t.verticalUpperBound=10*Math.ceil(t.maxValue/10),t.verticalLabelFreq=t.verticalUpperBound/t.itemsNum,t.horizontalLabelFreq=t.horizontalAxisWidth/t.itemsNum},BarChart.prototype.drawChart=function(){var t=this;t.drawVerticalAxis(),t.drawVerticalLabels(),t.drawHorizontalAxis(),t.drawHorizontalLabels(),t.drawHorizontalGuidelines(),t.drawVerticalGuidelines(),t.drawBars()},BarChart.prototype.drawVerticalAxis=function(){var t=this;t.context.beginPath(),t.context.strokeStyle=t.axisColor,t.context.lineWidth=t.axisWidth,t.context.moveTo(t.horizontalMargin,t.verticalMargin),t.context.lineTo(t.horizontalMargin,t.height-t.verticalMargin),t.context.stroke()},BarChart.prototype.drawVerticalLabels=function(){var e=this;e.context.font=e.fontStyle+" "+e.fontWeight+" "+e.verticalFontSize+"px "+e.fontFamily,e.context.textAlign="right",e.context.fillStyle=e.fontColor;var r=e.verticalAxisWidth/e.verticalUpperBound*e.verticalLabelFreq;for(let a=0;a<=e.itemsNum;a++){let t=e.verticalUpperBound-a*e.verticalLabelFreq;var i=e.horizontalMargin-e.horizontalMargin/e.axisRatio,o=e.verticalMargin+a*r;e.context.fillText(t.toString(),i,o)}},BarChart.prototype.drawHorizontalAxis=function(){var t=this;t.context.beginPath(),t.context.strokeStyle=t.axisColor,t.context.lineWidth=t.axisWidth,t.context.moveTo(t.horizontalMargin,t.height-t.verticalMargin),t.context.lineTo(t.width-t.horizontalMargin,t.height-t.verticalMargin),t.context.stroke()},BarChart.prototype.drawHorizontalLabels=function(){var a=this;a.context.font=a.fontStyle+" "+a.fontWeight+" "+a.verticalFontSize+"px "+a.fontFamily,a.context.textAlign="center",a.context.textBaseline="top",a.context.fillStyle=a.fontColor;for(let t=0;t<a.itemsNum;t++){var e=a.horizontalMargin+t*a.horizontalLabelFreq+a.horizontalLabelFreq/2,r=a.height-a.verticalMargin+a.verticalMargin/a.axisRatio;a.context.fillText(a.labels[t],e,r)}},BarChart.prototype.drawHorizontalGuidelines=function(){var a=this;a.context.strokeStyle=a.guidelineColor,a.context.lineWidth=a.guidelineWidth;var e=a.verticalAxisWidth/a.verticalUpperBound*a.verticalLabelFreq;for(let t=0;t<=a.itemsNum;t++){var r=a.horizontalMargin,i=a.verticalMargin+t*e,o=a.horizontalMargin+a.horizontalAxisWidth,n=a.verticalMargin+t*e;a.context.beginPath(),a.context.moveTo(r,i),a.context.lineTo(o,n),a.context.stroke()}},BarChart.prototype.drawVerticalGuidelines=function(){var a=this;a.context.strokeStyle=a.guidelineColor,a.context.lineWidth=a.guidelineWidth;for(let t=0;t<=a.itemsNum;t++){var e=a.horizontalMargin+t*a.horizontalLabelFreq,r=a.height-a.verticalMargin,i=a.horizontalMargin+t*a.horizontalLabelFreq,o=a.verticalMargin;a.context.beginPath(),a.context.moveTo(e,r),a.context.lineTo(i,o),a.context.stroke()}},BarChart.prototype.drawBars=function(){var a=this;for(let t=0;t<a.itemsNum;t++){var e=a.createRandomRGBColor(),r="rgba("+e.r+", "+e.g+", "+e.b+", 0.3)",i="rgba("+e.r+", "+e.g+", "+e.b+")",o=a.horizontalMargin+t*a.horizontalLabelFreq+a.horizontalLabelFreq/a.axisRatio,n=a.height-a.verticalMargin,l=a.horizontalLabelFreq-2*a.horizontalLabelFreq/a.axisRatio,e=-1*a.verticalAxisWidth*a.values[t]/a.maxValue;a.context.beginPath(),a.context.fillStyle=r,a.context.strokeStyle=i,a.context.rect(o,n,l,e),a.context.stroke(),a.context.fill()}},BarChart.prototype.createRandomRGBColor=function(){return{r:getRandomInt(0,257),g:getRandomInt(0,257),b:getRandomInt(0,257)}};